<%- include('../partials/header', { nav: { current: '/actors' }, title: 'Actor #' + actor.actor_id }) %>

<div class="container container-narrow py-3">
    <h1 class="h3 mb-3">Actor #<%= actor.actor_id %></h1>

    <p class="lead mb-1">
        <strong><%= (actor.first_name || '').toUpperCase() %> <%= (actor.last_name || '').toUpperCase() %></strong>
        <span class="text-muted"> · updated <%= formatDateTime(actor.last_update) %></span>
    </p>

    <div class="mb-3">
        <a class="btn btn-outline-light btn-sm" href="/actors">Back to list</a>

        <% if (currentUser) { %>
            <a class="btn btn-primary btn-sm" href="/actors/<%= actor.actor_id %>/edit">Edit</a>
            <form class="d-inline" method="post" action="/actors/<%= actor.actor_id %>/delete" onsubmit="return confirm('Delete this actor?')">
                <button class="btn btn-danger btn-sm">Delete</button>
            </form>
        <% } %>
    </div>

    <hr class="border-secondary">

    <h2 class="h5 mb-2">Films (<%= films.length %>)</h2>
    <% if (!films.length) { %>
        <p class="text-muted">This actor isn’t linked to any films.</p>
    <% } else { %>
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead>
                <tr>
                    <th style="width:72px">#</th>
                    <th>Title</th>
                    <th style="width:100px">Year</th>
                    <th style="width:100px">Length</th>
                    <th style="width:90px">Rating</th>
                </tr>
                </thead>
                <tbody>
                <% films.forEach(function(f){ %>
                    <tr>
                        <td><%= f.film_id %></td>
                        <td><a href="/films/<%= f.film_id %>"><%= f.title %></a></td>
                        <td><%= f.release_year || '' %></td>
                        <td><%= (f.length ? f.length + ' min' : '') %></td>
                        <td><%= f.rating || '' %></td>
                    </tr>
                <% }) %>
                </tbody>
            </table>
        </div>
    <% } %>
</div>

<%- include('../partials/footer') %>
