<%- include('../partials/header', { nav: { current: '/films' }, title: film.title }) %>
<div class="container container-narrow py-3">
    <div class="row g-4">
        <div class="col-md-3">
            <img class="img-fluid rounded poster-fit" src="/posters/<%= (film.title || '').toUpperCase().replace(/\s+/g,'_').replace(/[^A-Z0-9_]/g,'') %>.png" onerror="this.src='/posters/placeholder.png'">
        </div>
        <div class="col-md-9">
            <h1 class="h4 mb-2"><%= film.title %></h1>
            <div class="mb-2">
                <span class="badge-soft"><%= film.language %></span>
                <% if (film.category) { %><span class="badge-soft ms-2"><%= film.category %></span><% } %>
                <% if (film.rating) { %><span class="badge-soft ms-2"><%= film.rating %></span><% } %>
                <% if (film.release_year) { %><span class="badge-soft ms-2"><%= film.release_year %></span><% } %>
            </div>
            <p class="mb-3"><%= film.description || '' %></p>

            <h2 class="h6">Actors</h2>
            <% if (!film.actors || !film.actors.length) { %>
                <p class="text-muted">None linked</p>
            <% } else { %>
                <ul class="mb-3">
                    <% film.actors.forEach(function(a){ %>
                        <li><%= a.first_name %> <%= a.last_name %></li>
                    <% }) %>
                </ul>
            <% } %>

            <% if (currentUser) { %>
                <a class="btn btn-primary" href="/films/<%= film.film_id %>/edit">Edit</a>
                <form class="d-inline" method="post" action="/films/<%= film.film_id %>/delete" onsubmit="return confirm('Delete film?');">
                    <button class="btn btn-danger">Delete</button>
                </form>
            <% } %>
        </div>
    </div>
</div>
<%- include('../partials/footer') %>
